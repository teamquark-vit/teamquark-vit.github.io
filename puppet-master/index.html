<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    <title>Puppet Master</title>
    <style>
        .container-1 {
            background-color: aquamarine;
            height: 200px;
        }

        .container-2 {
            background-color: beige;
            height: 200px;
        }
    </style>
</head>

<body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.min.js"
        integrity="sha384-IDwe1+LCz02ROU9k972gdyvl+AESN10+x7tBKgc9I5HFtuNz0wWnPclzo6p9vxnk"
        crossorigin="anonymous"></script>
    <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.7.2.1.min.js"></script>

    <script>
        let pubnub;

        function setupPubNub() {
            pubnub = new PubNub({
                publishKey: "pub-c-7bccaa86-de43-45b8-a1a3-a34cfe25b4a9",
                subscribeKey: "sub-c-bf663e90-0644-40ac-8fae-d84bafe2737b",
                userId: "quark-1.0"
            });
        }

        async function sendColor(color) {
            await pubnub.publish({
                channel: 'main',
                message: {
                    op: 'BG_COLOR',
                    data: {
                        color
                    }
                }
            })
        }

        async function sendDisco() {
            await pubnub.publish({
                channel: 'main',
                message: {
                    op: 'DISCO'
                }
            })
        }
        async function exitVisible() {
            await pubnub.publish({
                channel: 'main',
                message: {
                    op: 'VISIBLE',
                    
                }
            })
        }

        async function sendRedirect(url) {
            await pubnub.publish({
                channel: 'main',
                message: {
                    op: 'REDIRECT',
                    data: {
                        url
                    }
                }
            })
        }

        window.onload = setupPubNub;
        function validateForm() {
            let x = document.forms["myForm"]["fcolor"].value;
            if (x == "") {
                alert("Color should not be empty");
                return false;
            }
            else {
                sendColor(x);
            }
        }

        function showExit(){
            
        }
        
         
        
    </script>

    <div class="container text-center">

        <div class="row align-items-center" style="height: 500px;">
            <div class="container-1 row align-items-center">
                <h3>Change Color</h3>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#FFFFFF');">White</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#FF0000');">Red</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#00FF00');">Green</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#ffa500');">Orange</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#ee82ee');">Pink</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#0000ff');">Blue</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendColor('#FFEA00');">Yellow</button>
                </div>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendDisco();">Disco</button>
                </div>
                <div>
                    <form name="myForm" onsubmit="validateForm()">
                        Color: <input type="text" name="fcolor" required>
                        <input type="submit" value="Submit">
                    </form>
                </div>
               
            </div>
            <div class="container-2 row align-items-center">

                <h3>Navigate to: </h3>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendRedirect('https://www.instagram.com/team_quark/?igshid=YmMyMTA2M2Y%3D');">Instagram</button>
                </div>
                <!-- <div class="col">
                    <button type="button" class="btn btn-primary" onclick="sendMessage('#ee82ee');">Website</button>
                </div> -->
                <h3>Make exit button visible</h3>
                <div class="col">
                    <button type="button" class="btn btn-primary" onclick="exitVisible();">Exit</button>
                </div>
                
            </div>

        </div>

    </div>
</body>

</html>